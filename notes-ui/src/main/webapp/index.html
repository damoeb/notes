<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" xmlns="http://www.w3.org/1999/html"> <!--<![endif]-->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css styles/vendor.css -->
    <!-- bower:css -->
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.compiled.css -->
    <link rel="stylesheet" href="styles/main.compiled.css">
    <!-- endbuild -->

    <link rel="stylesheet" href="scripts/pdf/pdf.css">
    <link rel="stylesheet" href="scripts/fileupload/jquery.fileupload-ui.css">

    <link rel="stylesheet" href="bower_components/jquery-ui/themes/base/jquery.ui.all.css">

    <!-- editor -->
    <link rel="stylesheet" href="bower_components/summernote/dist/summernote.css">

    <!-- Icon Font -->
    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">

    <script src="bower_components/modernizr/modernizr.js"></script>

</head>

<body>

<!--[if lt IE 7]>
<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
    your browser</a></p>
<![endif]-->

<div id="init-view">

    <h4 style="margin: 20px;"><i class="fa fa-spinner fa-spin"></i> processing...</h4>

    <!--<div class="container">-->
    <!--<div class="row">-->
    <!--<div class="col-lg-2">-->
    <!--<input type="text" placeholder="username" name="username" id="field-username" value="guest">-->
    <!--</div>-->
    <!--</div>-->
    <!--<div class="row">-->
    <!--<div class="col-lg-2">-->
    <!--<input type="password" placeholder="password" name="password" id="field-password" value="test">-->
    <!--</div>-->
    <!--</div>-->
    <!--<div class="row">-->
    <!--<div class="col-lg-2">-->
    <!--<input type="text" placeholder="email" name="email" id="field-email" value="someone@gmail.com">-->
    <!--</div>-->
    <!--</div>-->
    <!--<div class="row">-->
    <!--<div class="col-lg-2">-->
    <!--<input type="button" value="Register" id="btt-register" onclick="notes.register()">-->
    <!--<input type="button" value="Login" id="btt-login" onclick="notes.login()">-->
    <!--</div>-->
    <!--</div>-->
    <!--</div>-->
</div>


<div id="content-view" style="display: none">

    <div class="container" style="margin-left: 0;">

        <!-- CONTENT TOP -->
        <div class="row"
             style="background: none repeat scroll 0 0 #F1F1F1; border-bottom: 1px solid #e1e1e1; padding-top:8px; padding-bottom:8px;">

            <!-- LEFT -->
            <div class="col-lg-2">

            </div>

            <!-- CONTENT -->

            <div class="col-lg-6">
                <div class="input-group">
                    <input id="search-input" class="form-control" type="text" name="query"
                           placeholder="Search"/>
                    <span class="input-group-btn">
                        <button class="btn btn-default" type="button">Go!</button>
                      </span>
                </div>
            </div>

            <div class="col-lg-2">

                <div class="btn-group dropdown">
                    <button type="button" class="btn btn-default" data-toggle="modal"
                            data-target="#create-document-modal">New
                    </button>

                    <div class="modal fade" id="create-document-modal" tabindex="-1" role="dialog" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal"
                                            aria-hidden="true">&times;</button>
                                    <h4 class="modal-title">New Document</h4>
                                </div>
                                <div class="modal-body">
                                    <p><input name="name" type="text" placeholder="title of document"
                                              id="new-document-title" class="form-control"></p>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                    <button type="button" class="btn btn-primary" data-dismiss="modal"
                                            onclick="$('#editors').editors('newDocument', $('#new-document-title').val())">
                                        Create
                                    </button>
                                </div>
                            </div>
                            <!-- /.modal-content -->
                        </div>
                        <!-- /.modal-dialog -->
                    </div>
                    <!-- /.modal -->


                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                        <span class="caret"></span>
                        <span class="sr-only">Toggle Dropdown</span>
                    </button>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="create-doc">
                        <li role="presentation">
                            <a role="menuitem" tabindex="-1" href="#" onclick="$('#create-document-modal').modal()">Document</a>
                        </li>
                        <li role="presentation" class="divider"></li>
                        <li role="presentation">
                            <a role="menuitem" tabindex="-1" href="#" onclick="$('#file-upload').click()">File</a>
                        </li>
                        <li role="presentation">
                            <a role="menuitem" tabindex="-1" href="#" onclick="notes.dialog.document.bookmark()">Web</a>
                        </li>
                    </ul>
                </div>

            </div>

            <!-- RIGHT -->
            <div class="col-lg-2">

                <div class="pull-right dropdown">
                    <button class="btn btn-default dropdown-toggle" type="button" id="settings" data-toggle="dropdown">
                        <i class="fa fa-bars"></i>
                    </button>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="settings">
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Export as Archive</a></li>
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#"
                                                   onclick="notes.dialog.document.import()">Import Archive</a></li>
                        <li role="presentation" class="divider"></li>
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="#" onclick="notes.core.logout()">Logout</a>
                        </li>
                    </ul>
                </div>

            </div>

        </div>

        <!-- CONTENT MAIN -->
        <div class="row">

            <!-- LEFT -->
            <div class="col-lg-4 sidebar" style="border-right: 1px solid #E2E2E2; min-height: 600px;">

                <div id="breadcrumbs" class="row" style="height: 32px; background-color: whitesmoke;">
                    <!-- generated --></div>

                <div id="databases"><!-- generated --></div>

            </div>

            <!-- CONTENT -->

            <!-- DOCUMENT VIEW -->

            <div id="document-view" class="col-lg-8">

                <div id="editors"><!-- generated --></div>
            </div>

            <!-- FOLDER VIEW -->

            <div id="folder-view" class="col-lg-8" style="display: none">

                <div class="row" style="height: 32px; background-color: whitesmoke;">

                    <div class="pull-right">
                        <div class="dropdown">
                            <a class="dropdown-toggle btn btn-default btn-sm" id="sortBy" data-toggle="dropdown"
                               href="#"><i class="fa fa-sort-alpha-asc fa-fw"></i> Sort</a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="sortBy">
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">
                                    <i class="fa fa-circle-o fa-fw"></i>
                                    by title</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">
                                    <i class="fa fa-circle fa-fw"></i>
                                    by date</a></li>
                                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">
                                    <i class="fa fa-circle-o fa-fw"></i>
                                    by type</a></li>
                            </ul>
                        </div>
                    </div>

                </div>

                <div id="document-list" style="margin-top: 5px"><!-- generated --></div>

            </div>

        </div>

    </div>

</div>

<div id="dialog"></div>
<!--<div id="bookmark-preview"-->
<!--style="position:fixed; top:0; left: 0; background-color: white; width: 100%; height: 100%; display:none">-->
<!--&lt;!&ndash;<div style="position: absolute; height: 200px; width: 400px; margin: -100px 0 0 -200px; top: 50%; left: 50%;"><img src="img/spinner.gif"><span style="margin-left:5px">waiting for snapshot</span></div>&ndash;&gt;
-->
<!--<div id="bookmark-preview-pdf" class="pdf-container" style="width: 1024px; margin:auto;"></div>-->
<!--</div>-->
<div style="display: none"><input id="file-upload" type="file" name="files[]" multiple></div>

<script type="text/html" id="text-editor">

    <div class="row" style="height: 32px; background-color: whitesmoke;">

        <div class="btn-group pull-left">

            <button class="btn btn-default btn-sm action-close" title="Close">
                <i class="fa fa-fw fa-circle-o"></i>
                Close
            </button>

            <!--<button class="btn btn-default btn-sm action-maximize" title="Maximize">-->
            <!--<i class="fa fa-fw fa-angle-up"></i>-->
            <!--</button>-->

        </div>

        <div class="btn-group pull-right">

            <span style="line-height: 30px; padding-left: 5px; padding-right: 5px; display: inline-block; float: left;"><%= modified?'changed '+$.timeago(modified):'' %></span>

            <button class="btn btn-default btn-sm action-edit-mode">
                <i class="fa fa-fw fa-pencil"></i>
                Edit Mode
            </button>

            <button class="btn btn-primary btn-sm action-view-mode" style="display: none">
                <i class="fa fa-fw fa-eye"></i>
                View Mode
            </button>

            <!--<button class="btn btn-default btn-sm action-save" style="display: none">-->
            <!--<i class="fa fa-fw fa-floppy-o"></i>-->
            <!--Save-->
            <!--</button>-->

            <button class="btn btn-default btn-sm action-star" title="Highlight">
                <span class="pane-with-star <%=!star?'hidden':'' %>">
                    <i class="fa fa-star" style="color:red;"></i>
                    Highlight
                </span>
                <span class="pane-without-star <%=star?'hidden':'' %>">
                    <i class="fa fa-star-o"></i>
                    Highlight
                </span>
            </button>


            <button class="btn btn-default btn-sm">
                <i class="fa fa-fw fa-fw fa-tag"></i>
                Tags
            </button>

            <!--<button title="Lock" class="btn btn-default btn-sm">-->
            <!--<i class="fa fa-lock"></i>-->
            <!--</button>-->

            <!--<button title="Trash" class="btn btn-default btn-sm">-->
            <!--<i class="fa fa-trash-o"></i>-->
            <!--</button>-->

            <!--<button title="Privacy" class="btn btn-default btn-sm">-->
            <!--<i class="fa fa-eye"></i>-->
            <!--</button>-->

            <!--<button title="Maximize" class="btn btn-default btn-sm action-maximize">-->
            <!--<i class="fa fa-arrows-alt fa-fw"></i> Maximize-->
            <!--</button>-->
        </div>
    </div>

    <div>
        <h3 class="field-title"><%= title %></h3>

        <div style="margin-top: 10px; line-height:20px;" class="field-text"><%= text %></div>

    </div>

</script>

<script type="text/html" id="pdf-editor">

    <div class="row" style="height: 32px; background-color: whitesmoke;">

        <div class="btn-group input-group-sm pull-left">

            <button class="btn btn-default btn-sm action-close" title="Close">
                <i class="fa fa-fw fa-circle-o"></i>
                Close
            </button>

            <!--<button class="btn btn-default btn-sm action-maximize" title="Maximize">-->
            <!--<i class="fa fa-fw fa-angle-up"></i>-->
            <!--</button>-->

            <button class="btn btn-default btn-sm action-previous-page" style="margin-left: 140px"
                    title="Previous Page">
                <i class="fa fa-fw fa-angle-left"></i>
            </button>

            <input type="text" class="form-control field-current-page"
                   style="width:50px; display:inline-block; float: left; text-align: center;" value="1">

            <span style="line-height: 30px; padding-left: 5px; padding-right: 5px; display: inline-block; float: left;">of <%= numberOfPages %></span>

            <button class="btn btn-default btn-sm action-next-page" title="Next Page">
                <i class="fa fa-fw fa-angle-right"></i>
            </button>

        </div>

        <div class="btn-group pull-right">

            <span style="line-height: 30px; padding-left: 5px; padding-right: 5px; display: inline-block; float: left;"><%= modified?'changed '+$.timeago(modified):'' %></span>

            <button class="btn btn-default btn-sm action-star" title="Highlight">
                <span class="pane-with-star <%=!star?'hidden':'' %>">
                    <i class="fa fa-star" style="color:red;"></i>
                    Highlight
                </span>
                <span class="pane-without-star <%=star?'hidden':'' %>">
                    <i class="fa fa-star-o"></i>
                    Highlight
                </span>
            </button>

            <button class="btn btn-default btn-sm">
                <i class="fa fa-fw fa-fw fa-tag"></i>
                Tags
            </button>

            <!--<button title="Trash" class="btn btn-default btn-sm">-->
            <!--<i class="fa fa-trash-o"></i>-->
            <!--</button>-->

            <!--<button title="Privacy" class="btn btn-default btn-sm">-->
            <!--<i class="fa fa-eye"></i>-->
            <!--</button>-->

            <!--<button title="Maximize" class="btn btn-default btn-sm action-maximize">-->
            <!--<i class="fa fa-arrows-alt fa-fw"></i> Maximize-->
            <!--</button>-->
        </div>
    </div>

    <div>
        <h3 class="field-title"><%= title %></h3>

        <div style="margin-top: 10px; line-height:20px;" class="field-text"><%= text %></div>

        <div class="pdf-container">
            <!-- generated -->
        </div>

    </div>

</script>

<script type="text/html" id="breadcrumb-database">
    <li class="dropdown">
        <i class="fa fa-dot-circle-o fa-lg"></i>
        <a class="dropdown-toggle" id="bc-db" data-toggle="dropdown" href="#" style="font-weight: bold;">Database</a>
        <ul class="dropdown-menu" role="menu" aria-labelledby="bc-db">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="#"
                                       onclick="notes.dialog.folder.newFolder(null)">Create Folder</a></li>
        </ul>
    </li>
</script>

<script type="text/html" id="breadcrumb-folder">
    <li class="dropdown">
        <a class="dropdown-toggle" id="bc-folder-<%= id %>" data-toggle="dropdown" href="#">
            <%= name %>
        </a>
        <ul class="dropdown-menu" role="menu" aria-labelledby="bc-folder-<%= id %>">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="#" class="action-open">Open</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="#" class="action-create">Create Folder</a>
            </li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="#" class="action-rename">Rename</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="#" class="action-delete">Delete</a></li>
        </ul>
    </li>
</script>

<script type="text/html" id="document-in-list">

    <div class="doc doc-id-<%=id %> row">
        <div class="col-lg-2">
            <img src="<%= notes.util.getThumbnailByType(kind) %>">
        </div>
        <div class="col-lg-10">

            <div class="row">
                <a href="#doc:<%=uniqueHash %>">
                    <h4 style="display: inline-block; margin: 0; overflow: hidden; white-space: nowrap; ">
                        <%=title %>
                        <%
                        if (star) {
                        %>
                        <i class="fa fa-star fa-fw" style="color: #808080"></i>
                        <%
                        }
                        %>
                        <i class="fa fa-paperclip fa-fw" style="color: #808080"></i>

                    </h4>
                </a>
                <span class="pull-right">
                    <%=notes.util.formatDate(new Date(modified)) %>
                </span>
            </div>
            <div class="row" style="color:#666666; line-height: 16px; ">
                <%=outline %>
            </div>
            <div class="row" style="margin-top: 5px">
                <a href="#tag:blablub" class="label label-default">blablub</a>
            </div>
        </div>
    </div>

</script>


<!-- build:js scripts/vendor.js -->
<!-- bower:js -->
<script src="bower_components/jquery/jquery.js"></script>
<script src="bower_components/jquery-ui/ui/jquery-ui.js"></script>

<script src="bower_components/jquery-timeago/jquery.timeago.js"></script>
<script type="text/javascript">

    jQuery.timeago.settings.strings = {
        prefixAgo: '',
        prefixFromNow: 'in',
        suffixAgo: '',
        suffixFromNow: '',
        seconds: 'now',
        minute: 'a minute',
        minutes: '%d minutes',
        hour: 'an hour',
        hours: '%d hours',
        day: 'a day',
        days: '%d days',
        month: 'a month',
        months: '%d month',
        year: 'a year',
        years: '%d years'
    };
</script>

<script src="bower_components/underscore/underscore-min.js"></script>
<script src="bower_components/backbone/backbone-min.js"></script>

<!-- notifications -->
<script src="bower_components/noty/js/noty/jquery.noty.js"></script>
<script type="text/javascript">

    $.noty.defaults = {
        layout: 'bottom',
        theme: 'defaultTheme',
        type: 'alert',
        text: '', // can be html or string
        dismissQueue: true, // If you want to use queue feature set this true
        template: '<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',
        animation: {
            open: {height: 'toggle'},
            close: {height: 'toggle'},
            easing: 'swing',
            speed: 500 // opening & closing animation speed
        },
        timeout: 1000, // delay for closing event. Set false for sticky notifications
        force: false, // adds notification to the beginning of queue when set to true
        modal: false,
        maxVisible: 5, // you can set max visible notification for dismissQueue true option,
        killer: false, // for close all notifications before show
        closeWith: ['click'], // ['click', 'button', 'hover']
        callback: {
            onShow: function () {
            },
            afterShow: function () {
            },
            onClose: function () {
            },
            afterClose: function () {
            }
        },
        buttons: false // an array of buttons
    };
</script>


<script src="bower_components/noty/js/noty/layouts/top.js"></script>
<script src="bower_components/noty/js/noty/themes/default.js"></script>

<!-- editor -->
<script src="bower_components/summernote/dist/summernote.js"></script>

<!-- file upload -->
<script src="scripts/fileupload/jquery.iframe-transport.js"></script>
<script src="scripts/fileupload/jquery.fileupload.js"></script>

<!-- pdf -->
<script src="scripts/pdf/pdf.js"></script>
<script src="scripts/pdf/textlayerbuilder.js"></script>
<script src="scripts/pdfloader.js"></script>

<!-- endbower -->
<!-- endbuild -->


<!-- build:js scripts/main.js -->
<script type="text/javascript">
    var notes = {};
    var REST_SERVICE = '/notes/rest';

</script>

<script src="scripts/util.js"></script>
<script src="scripts/app.js"></script>
<script src="scripts/core.js"></script>
<script src="scripts/model.js"></script>
<script src="scripts/dialog.js"></script>

<script src="scripts/breadcrumbs.js"></script>
<script src="scripts/documentlist.js"></script>

<script src="scripts/editors.js"></script>
<script src="scripts/basiceditor.js"></script>
<script src="scripts/texteditor.js"></script>
<script src="scripts/pdfeditor.js"></script>

<script src="scripts/tree.js"></script>
<script src="scripts/databases.js"></script>
<script src="scripts/folder.js"></script>
<!-- endbuild -->


<!-- build:js scripts/plugins.js -->
<script src="bower_components/sass-bootstrap/js/affix.js"></script>
<script src="bower_components/sass-bootstrap/js/alert.js"></script>
<script src="bower_components/sass-bootstrap/js/dropdown.js"></script>
<script src="bower_components/sass-bootstrap/js/tooltip.js"></script>
<script src="bower_components/sass-bootstrap/js/modal.js"></script>
<script src="bower_components/sass-bootstrap/js/transition.js"></script>
<script src="bower_components/sass-bootstrap/js/button.js"></script>
<script src="bower_components/sass-bootstrap/js/popover.js"></script>
<script src="bower_components/sass-bootstrap/js/carousel.js"></script>
<script src="bower_components/sass-bootstrap/js/scrollspy.js"></script>
<script src="bower_components/sass-bootstrap/js/collapse.js"></script>
<script src="bower_components/sass-bootstrap/js/tab.js"></script>
<!-- endbuild -->


<script type="text/javascript">

    $(document).ready(function () {

        // -- Overwrites -------------------------------------------------------------------------------------------
        var fnCustomParse = function (data) {
            if (_.isObject(data.result)) {
                return data.result;
            } else {
                return data;
            }
        };
        Backbone.Model.prototype.parse = fnCustomParse;
        Backbone.Collection.prototype.parse = fnCustomParse;

        notes.setup();

        $('#document-list').documentList();


//        $('#document-view').show();

//        var values = {
//            modified:null,
//            title:'sometitle'
//        };
//        $('#editors').empty().append(_.template($('#editor-template').html())(values).trim());

    });

    var SUMMERNOTE_CFG = {
        height: 300,
        toolbar: [
            //['style', ['style']], // no style button
            ['style', ['bold', 'italic', 'underline', 'clear']],
            ['fontsize', ['fontsize']],
            ['color', ['color']],
            ['para', ['ul', 'ol', 'paragraph']],
            ['height', ['height']],
            //['insert', ['picture', 'link']], // no insert buttons
            ['table', ['table']], // no table button
            //['help', ['help']] //no help button
        ]
    };

</script>

</body>
</html>
